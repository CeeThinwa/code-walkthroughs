

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Text Recognition &#8212; Code Walkthroughs</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'kenyans-in-print/kip-pg3';</script>
    <link rel="shortcut icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Image block segmentation: Part II" href="kip-pg2.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Welcome to Code Walkthroughs
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="kip-intro.html">Kenyans in Print</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="kip-pg1.html">Image block segmentation: Part I</a></li>
<li class="toctree-l2"><a class="reference internal" href="kip-pg2.html">Image block segmentation: Part II</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Text Recognition</a></li>

</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/ceethinwa/code-walkthroughs/main?urlpath=tree/book/kenyans-in-print/kip-pg3.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onBinder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="initThebeSBT()"
  class="btn btn-sm btn-launch-thebe dropdown-item"
  title="Launch Thebe"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="btn__text-container">Live Code</span>
</button>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/kenyans-in-print/kip-pg3.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Text Recognition</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Text Recognition</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ocr-technology">OCR Technology</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#installation-on-server-cpu-for-tesseract">Installation on Server/CPU for Tesseract</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#obtain-the-larger-text-for-each-sub-image">Obtain the larger text for each sub-image</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ocr-vs-machine-learning-output">OCR vs. Machine Learning output</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#raw-text-results-from-using-pytesseract">1. Raw text results from using PyTesseract</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#raw-text-results-from-using-textract">2. Raw text results from using Textract</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="text-recognition">
<h1>Text Recognition<a class="headerlink" href="#text-recognition" title="Permalink to this heading">#</a></h1>
<p>Based on my research around segmentation, manual cropping of images is the way to go. Therefore, using the same image in the series, it was manually split.</p>
<p>Text recognition, especially for print involves either:</p>
<ol class="arabic simple">
<li><p>Use of optical character recognition; <a class="reference external" href="https://github.com/tesseract-ocr/tesseract">Tessaract</a> is an open-source OCR (Optical Character Recognition) software.</p></li>
<li><p>Use of out-of-the box machine learning like <a class="reference external" href="https://aws.amazon.com/textract/">Textract</a>, a product from Amazon that is part of its machine learning solutions.</p></li>
</ol>
<section id="ocr-technology">
<h2>OCR Technology<a class="headerlink" href="#ocr-technology" title="Permalink to this heading">#</a></h2>
<section id="installation-on-server-cpu-for-tesseract">
<h3>Installation on Server/CPU for Tesseract<a class="headerlink" href="#installation-on-server-cpu-for-tesseract" title="Permalink to this heading">#</a></h3>
<p>The first step is to install Tessaract on your OS…</p>
<p>In my case, I:</p>
<ul class="simple">
<li><p>installed <a class="reference external" href="https://github.com/UB-Mannheim/tesseract/wiki"><em>Tessaract 5.0</em> for Windows</a> using <a class="reference external" href="https://medium.com/quantrium-tech/installing-and-using-tesseract-4-on-windows-10-4f7930313f82">this guide</a> to work locally, and</p></li>
<li><p>installed it in the cloud by running</p>
<ul>
<li><p>the following command on Google Colab (Ubuntu): <code class="docutils literal notranslate"><span class="pre">!sudo</span> <span class="pre">apt</span> <span class="pre">install</span> <span class="pre">tesseract-ocr</span></code></p></li>
<li><p>the following commands on Deepnote (Debian) terminal: <code class="docutils literal notranslate"><span class="pre">!sudo</span> <span class="pre">apt-get</span> <span class="pre">update</span></code> and then <code class="docutils literal notranslate"><span class="pre">!sudo</span> <span class="pre">apt</span> <span class="pre">install</span> <span class="pre">tesseract-ocr</span> <span class="pre">-y</span></code></p></li>
</ul>
</li>
</ul>
<p><em>N/B: For each session in the cloud, run the Tesseract installation commands in the cell/terminal.</em></p>
<p>Python Tesseract wrappers for <em>Tesseract 4.0x</em></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tesserocr</span></code> - A Python wrapper around Tesseract’s C++ API (however, it does not work with <em>Tesseract 5.0</em>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytesseract</span></code> - a wrapper class for Tesseract OCR (requires tesseract executable)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tesseract-ocr-wrapper</span></code> - a python wrapper for tesseract-ocr with support for OCRing of pdf</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">aiopytesseract</span></code> - asyncio tesseract wrapper for Tesseract-OCR.</p></li>
</ul>
<blockquote>
<div><p><em>In python there are two most popular options: <code class="docutils literal notranslate"><span class="pre">PyTesseract</span></code> and <code class="docutils literal notranslate"><span class="pre">Tesserocr</span></code>.</em>
<em><code class="docutils literal notranslate"><span class="pre">Tesserocr</span></code> is a python wrapper around the Tesseract C++ API. On the other hand, <code class="docutils literal notranslate"><span class="pre">PyTesseract</span></code> is a wrapper for the tesseract-ocr CLI program.</em>
<em>And as you can guess <code class="docutils literal notranslate"><span class="pre">Tesserocr</span></code> gives a lot more flexibility and control over tesseract. <code class="docutils literal notranslate"><span class="pre">Tesserocr</span></code> has multi-processing capabilities</em>
<em>which are much faster in actual practise as compared to <code class="docutils literal notranslate"><span class="pre">PyTesseract</span></code>.</em><br>
 - Analytics Vidhya</p>
</div></blockquote>
<p>Once the tesseract engine is up and running, you can install <code class="docutils literal notranslate"><span class="pre">PyTesseract</span></code> with the following code: <code class="docutils literal notranslate"><span class="pre">!pip</span> <span class="pre">install</span> <span class="pre">pytesseract</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>Pillow
<span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>numpy
<span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>opencv-python-headless
<span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>pythonRLSA
<span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>pytesseract
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: Pillow in c:\users\ct\documents\github\code-walkthroughs\venv\lib\site-packages (9.5.0)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: numpy in c:\users\ct\documents\github\code-walkthroughs\venv\lib\site-packages (1.21.6)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: opencv-python-headless in c:\users\ct\documents\github\code-walkthroughs\venv\lib\site-packages (4.7.0.72)
Requirement already satisfied: numpy&gt;=1.17.0 in c:\users\ct\documents\github\code-walkthroughs\venv\lib\site-packages (from opencv-python-headless) (1.21.6)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: pythonRLSA in c:\users\ct\documents\github\code-walkthroughs\venv\lib\site-packages (1.0.0)
Requirement already satisfied: numpy in c:\users\ct\documents\github\code-walkthroughs\venv\lib\site-packages (from pythonRLSA) (1.21.6)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: pytesseract in c:\users\ct\documents\github\code-walkthroughs\venv\lib\site-packages (0.3.10)
Requirement already satisfied: packaging&gt;=21.3 in c:\users\ct\documents\github\code-walkthroughs\venv\lib\site-packages (from pytesseract) (23.0)
Requirement already satisfied: Pillow&gt;=8.0.0 in c:\users\ct\documents\github\code-walkthroughs\venv\lib\site-packages (from pytesseract) (9.5.0)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span> <span class="c1"># Pillow package</span>
<span class="kn">import</span> <span class="nn">cv2</span> <span class="c1"># Open CV package</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span> <span class="c1"># Numpy package</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">from</span> <span class="nn">pythonRLSA</span> <span class="kn">import</span> <span class="n">rlsa</span>
<span class="kn">import</span> <span class="nn">pytesseract</span>
<span class="kn">import</span> <span class="nn">argparse</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">photo</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">sample_image_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;./kip-images/part</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">.jpg&quot;</span>
        <span class="n">photo</span><span class="p">[</span><span class="n">sample_image_path</span><span class="p">]</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">sample_image_path</span><span class="p">)</span>

    <span class="k">except</span><span class="p">:</span>
        <span class="n">sample_image_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;/home/jovyan/book/kenyans-in-print/kip-images/part</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">.jpg&quot;</span>
        <span class="n">photo</span><span class="p">[</span><span class="n">sample_image_path</span><span class="p">]</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">sample_image_path</span><span class="p">)</span>


<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">photo</span><span class="p">:</span>
    <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">photo</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">size</span>
    <span class="n">display</span><span class="p">(</span><span class="n">photo</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span>
        <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">width</span><span class="o">*</span><span class="mf">0.2</span><span class="p">),</span><span class="nb">int</span><span class="p">(</span><span class="n">height</span><span class="o">*</span><span class="mf">0.2</span><span class="p">))</span>
    <span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/101742ac351790759350ac46a2b927af4c23bb998e11adbe462804944bb9eb46.png" src="../_images/101742ac351790759350ac46a2b927af4c23bb998e11adbe462804944bb9eb46.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<img alt="../_images/8b5ae71275e7ebbaf11484bc4e6782ee5177048834bc07dffd393c0e8e96c4cc.png" src="../_images/8b5ae71275e7ebbaf11484bc4e6782ee5177048834bc07dffd393c0e8e96c4cc.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<img alt="../_images/e8616f33fc36888002d9bf8af79c60095ceee4ce80958998ea858185f241df7b.png" src="../_images/e8616f33fc36888002d9bf8af79c60095ceee4ce80958998ea858185f241df7b.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<img alt="../_images/0fd0747b095d2f50e9d5961a2ac3752251c75fc2d7f7c9e98dfa63c4489f147a.png" src="../_images/0fd0747b095d2f50e9d5961a2ac3752251c75fc2d7f7c9e98dfa63c4489f147a.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<img alt="../_images/d82a66a054df73cee031d928bf8abf62aad33d87f75e2c0f02f501259ae3a2c9.png" src="../_images/d82a66a054df73cee031d928bf8abf62aad33d87f75e2c0f02f501259ae3a2c9.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<img alt="../_images/2d3528b45cac36c7eff8d7e5c4afebcb04272ce02092ce032116bfd314414a10.png" src="../_images/2d3528b45cac36c7eff8d7e5c4afebcb04272ce02092ce032116bfd314414a10.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="obtain-the-larger-text-for-each-sub-image">
<h2>Obtain the larger text for each sub-image<a class="headerlink" href="#obtain-the-larger-text-for-each-sub-image" title="Permalink to this heading">#</a></h2>
<p>From the images, there are taller elements; let’s get the mask of each image that has that feature</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">masks</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">large_text</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">new_photo</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">photo</span><span class="p">:</span>
    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">key</span><span class="p">),</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>
    <span class="p">(</span><span class="n">thresh</span><span class="p">,</span> <span class="n">binary</span><span class="p">)</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">threshold</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">THRESH_BINARY</span> <span class="o">|</span>
                                 <span class="n">cv2</span><span class="o">.</span><span class="n">THRESH_OTSU</span><span class="p">)</span>
    <span class="p">(</span><span class="n">contours</span><span class="p">,</span> <span class="n">_</span><span class="p">)</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">findContours</span><span class="p">(</span><span class="o">~</span><span class="n">binary</span><span class="p">,</span><span class="n">cv2</span><span class="o">.</span><span class="n">RETR_EXTERNAL</span><span class="p">,</span><span class="n">cv2</span><span class="o">.</span><span class="n">CHAIN_APPROX_SIMPLE</span><span class="p">)</span>
    
    <span class="k">for</span> <span class="n">contour</span> <span class="ow">in</span> <span class="n">contours</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        draw a rectangle around those contours on main image</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">w</span><span class="p">,</span><span class="n">h</span><span class="p">]</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">boundingRect</span><span class="p">(</span><span class="n">contour</span><span class="p">)</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">key</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">w</span><span class="p">,</span><span class="n">y</span><span class="o">+</span><span class="n">h</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
    
    <span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;uint8&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="mi">255</span> <span class="c1"># create blank image of same dimension of the original image</span>
    <span class="n">heights</span> <span class="o">=</span> <span class="p">[</span><span class="n">cv2</span><span class="o">.</span><span class="n">boundingRect</span><span class="p">(</span><span class="n">contour</span><span class="p">)[</span><span class="mi">3</span><span class="p">]</span> <span class="k">for</span> <span class="n">contour</span> <span class="ow">in</span> <span class="n">contours</span><span class="p">]</span> <span class="c1"># collecting heights of each contour</span>
    
    <span class="n">avgheight</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">heights</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">heights</span><span class="p">)</span> <span class="c1"># average height</span>
    
    <span class="c1"># finding the larger contours</span>
    <span class="c1"># Applying Height heuristic</span>
    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">contours</span><span class="p">:</span>
        <span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">w</span><span class="p">,</span><span class="n">h</span><span class="p">]</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">boundingRect</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">h</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="o">*</span><span class="n">avgheight</span><span class="p">:</span>
            <span class="n">cv2</span><span class="o">.</span><span class="n">drawContours</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="p">[</span><span class="n">c</span><span class="p">],</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">shape</span>
    
    <span class="n">value</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">x</span><span class="o">/</span><span class="mi">100</span><span class="p">),</span><span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">y</span><span class="o">/</span><span class="mi">100</span><span class="p">))</span><span class="o">+</span><span class="mi">20</span> <span class="c1">#heuristic</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="n">rlsa</span><span class="o">.</span><span class="n">rlsa</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="c1">#rlsa application with rlsa vertical - &quot;reads&quot; the content top to bottom</span>
    
    <span class="p">(</span><span class="n">contours</span><span class="p">,</span> <span class="n">_</span><span class="p">)</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">findContours</span><span class="p">(</span><span class="o">~</span><span class="n">mask</span><span class="p">,</span><span class="n">cv2</span><span class="o">.</span><span class="n">RETR_EXTERNAL</span><span class="p">,</span><span class="n">cv2</span><span class="o">.</span><span class="n">CHAIN_APPROX_SIMPLE</span><span class="p">)</span> <span class="c1"># find contours</span>
    <span class="n">mask2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;uint8&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="mi">255</span> <span class="c1"># blank 3 layer image</span>
    
    <span class="k">for</span> <span class="n">contour</span> <span class="ow">in</span> <span class="n">contours</span><span class="p">:</span>
        <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">]</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">boundingRect</span><span class="p">(</span><span class="n">contour</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">w</span> <span class="o">&gt;</span> <span class="mf">0.02</span><span class="o">*</span><span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="c1"># width heuristic applied; experimented until this number</span>
            <span class="n">large</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">key</span><span class="p">)[</span><span class="n">y</span><span class="p">:</span> <span class="n">y</span><span class="o">+</span><span class="n">h</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="n">w</span><span class="p">]</span>
            <span class="n">mask2</span><span class="p">[</span><span class="n">y</span><span class="p">:</span> <span class="n">y</span><span class="o">+</span><span class="n">h</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="n">w</span><span class="p">]</span> <span class="o">=</span> <span class="n">large</span> <span class="c1"># copied title contour onto the blank image</span>
            <span class="n">large_text</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">mask2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">KeyboardInterrupt</span><span class="g g-Whitespace">                         </span>Traceback (most recent call last)
<span class="o">~</span>\<span class="n">AppData</span>\<span class="n">Local</span>\<span class="n">Temp</span>\<span class="n">ipykernel_12736</span>\<span class="mf">1554784568.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">     </span><span class="mi">31</span> 
<span class="g g-Whitespace">     </span><span class="mi">32</span>     <span class="n">value</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">x</span><span class="o">/</span><span class="mi">100</span><span class="p">),</span><span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">y</span><span class="o">/</span><span class="mi">100</span><span class="p">))</span><span class="o">+</span><span class="mi">20</span> <span class="c1">#heuristic</span>
<span class="ne">---&gt; </span><span class="mi">33</span>     <span class="n">mask</span> <span class="o">=</span> <span class="n">rlsa</span><span class="o">.</span><span class="n">rlsa</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="c1">#rlsa application with rlsa vertical - &quot;reads&quot; the content top to bottom</span>
<span class="g g-Whitespace">     </span><span class="mi">34</span> 
<span class="g g-Whitespace">     </span><span class="mi">35</span>     <span class="p">(</span><span class="n">contours</span><span class="p">,</span> <span class="n">_</span><span class="p">)</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">findContours</span><span class="p">(</span><span class="o">~</span><span class="n">mask</span><span class="p">,</span><span class="n">cv2</span><span class="o">.</span><span class="n">RETR_EXTERNAL</span><span class="p">,</span><span class="n">cv2</span><span class="o">.</span><span class="n">CHAIN_APPROX_SIMPLE</span><span class="p">)</span> <span class="c1"># find contours</span>

<span class="nn">c:\users\ct\documents\github\code-walkthroughs\venv\lib\site-packages\pythonRLSA\rlsa.py</span> in <span class="ni">rlsa</span><span class="nt">(image, horizontal, vertical, value)</span>
<span class="g g-Whitespace">     </span><span class="mi">71</span>             <span class="k">if</span> <span class="n">vertical</span><span class="p">:</span>
<span class="g g-Whitespace">     </span><span class="mi">72</span>                 <span class="n">image</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">T</span>
<span class="ne">---&gt; </span><span class="mi">73</span>                 <span class="n">image</span> <span class="o">=</span> <span class="n">iteration</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">valuev</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">74</span>                 <span class="n">image</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">T</span>
<span class="g g-Whitespace">     </span><span class="mi">75</span> 

<span class="nn">c:\users\ct\documents\github\code-walkthroughs\venv\lib\site-packages\pythonRLSA\rlsa.py</span> in <span class="ni">iteration</span><span class="nt">(image, value)</span>
<span class="g g-Whitespace">     </span><span class="mi">21</span>         <span class="n">count</span> <span class="o">=</span> <span class="n">start</span>
<span class="g g-Whitespace">     </span><span class="mi">22</span>         <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">cols</span><span class="p">):</span>
<span class="ne">---&gt; </span><span class="mi">23</span>             <span class="k">if</span> <span class="n">image</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="g g-Whitespace">     </span><span class="mi">24</span>                 <span class="k">if</span> <span class="p">(</span><span class="n">col</span><span class="o">-</span><span class="n">count</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">value</span> <span class="ow">and</span> <span class="p">(</span><span class="n">col</span><span class="o">-</span><span class="n">count</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<span class="g g-Whitespace">     </span><span class="mi">25</span>                     <span class="n">image</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="n">count</span><span class="p">:</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

<span class="ne">KeyboardInterrupt</span>: 
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">large_text</span><span class="p">:</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">large_text</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2RGB</span><span class="p">)</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
    <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">size</span>
    <span class="n">display</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span>
        <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">width</span><span class="o">*</span><span class="mf">0.2</span><span class="p">),</span><span class="nb">int</span><span class="p">(</span><span class="n">height</span><span class="o">*</span><span class="mf">0.2</span><span class="p">))</span>
    <span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/06376f8b19fe9fbe67a5aca2430a3609dcedc06f2475a94e022f2a0d31e39db9.png" src="../_images/06376f8b19fe9fbe67a5aca2430a3609dcedc06f2475a94e022f2a0d31e39db9.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<img alt="../_images/4e1574cd7ccfd5ceb6f4083e755bf597626f54553568dfbf891645033f6510cf.png" src="../_images/4e1574cd7ccfd5ceb6f4083e755bf597626f54553568dfbf891645033f6510cf.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<img alt="../_images/e578c9e6cbe56de10c3fee81f4364243dbc6e6a903c19a3f24c8c25218684ddd.png" src="../_images/e578c9e6cbe56de10c3fee81f4364243dbc6e6a903c19a3f24c8c25218684ddd.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<img alt="../_images/16be16b4a5eb635f479ef3334ed387c7a68b1e55df2d4b876b0c4bee656aa8a3.png" src="../_images/16be16b4a5eb635f479ef3334ed387c7a68b1e55df2d4b876b0c4bee656aa8a3.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<img alt="../_images/8d7e4b02e996c85ea2432258e314485a579a565224f7270a28785e2bbc800535.png" src="../_images/8d7e4b02e996c85ea2432258e314485a579a565224f7270a28785e2bbc800535.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="ocr-vs-machine-learning-output">
<h2>OCR vs. Machine Learning output<a class="headerlink" href="#ocr-vs-machine-learning-output" title="Permalink to this heading">#</a></h2>
<section id="raw-text-results-from-using-pytesseract">
<h3>1. Raw text results from using PyTesseract<a class="headerlink" href="#raw-text-results-from-using-pytesseract" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">photo</span><span class="p">:</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">pytesseract</span><span class="o">.</span><span class="n">image_to_string</span><span class="p">(</span><span class="n">photo</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;---------------&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>---------------
BINGLUCAN Brequeg
PS

---------------
Barbara Nyambura is an actress, comedian and content creator. She has been in-
volved ina number of local stage productions, and is an extra in the TV series Moni-
ca and a journalist in Kina. On TikTok, she has 105,000 followers, and she emerged
runner up for the TikTok Comedy Creator of the Year in 2020

---------------
TikTok boost? Do you consider yourself
aprofessional actress or a professional
marketer?

I got serious about TikTok just a little before
Covid-19 struck as a way to keep my creative side
alive. Starting out,I didn&#39;t have a particular style.
Idid anything and everything under the sun.But,
the more I grew as a creator, the more my content
evolved.

It wasn&#39;t until I pulled out my consumer
behaviour notes that I truly understood how
heavily intertwined marketing and acting were.
Creating content has brought to life a lot of the
concepts I learnt in school such as understanding
my audience, mapping out their behaviour
(what they like and don&#39;t like) and using that
information to craft my content in a manner that
would best resonate with them.Hmm...I dare say,
I consider myself both a professional marketer
and a professional actress.

1 . What part of your marketing career does

.How did you come up with such an
interesting persona? Is it that you didn&#39;t
want to be recognised on the streets? Is

---------------
&quot;your Tiktok persona simply an expression of
your intimate thoughts?

Great question! The different personas I
embody in my videos were all birthed out of
necessity. They are the vehicles that personify
the ideas I have in my head, and I present them
in a visual manner that is understandable
to whoever watches them. So yes, my TikTok
persona is simply an expression of my intimate

thoughts.

.You feature on a number of Kenyan
series.Is this an area you are interested in
developing? What kind of shows would
you like to be part of in future?
&gt; Absolutely. I&#39;m not particularly fixed on any
types of shows. Any opportunity I get to relay a
story,I will take in a heartbeat.

.Do your fans try to get you to tell thema
joke when they meet you on the streets?
Does that kind of attention feel nice or
invasive?
Haha! Not at all, although that would be an
interesting thing to experience. I highly cherish

---------------
any interactions I have with my fans and lovers
of my content. As creators, we always dream of
having our art reach and impact as many people
as possible. So, to have fans show appreciation for
my work, and even detail out what it means to
them, is something I truly treasure.

I view my relationship with fans as a symbiotic
one rather than a predatory one, where both
parties are continuously gaining from each
other, Fans relish in the quality of content while
the celebrity basks in the attention (likes, views,
comments, shares) that comes with it.

.Did you ever see yourself on this career

path when you were younger? What would

you say to your younger self?

solutely not! I mean, I always hoped that
I&#39;d end up in the creative industry but as a
comedian? Haha. That never crossed my mind.
But, I am extremely glad and grateful that I
ended up here and that I get to make thousands
of people laugh. 1 would tell my younger self to
start. Just start. You don&#39;t need to wait till you
have an expensive camera, phone or lights. The
resources you have, however little, are enough.

---------------
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">large_text</span><span class="p">:</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">large_text</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2RGB</span><span class="p">)</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">pytesseract</span><span class="o">.</span><span class="n">image_to_string</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;---------------&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>---------------
ee
Barbara Nyambura


---------------

---------------

---------------

---------------
</pre></div>
</div>
</div>
</div>
<p>Strangely enough from the results above, the computer is struggling to identify the isolated large text, but gives pretty okay results from the original cropped images themselves.</p>
</section>
<section id="raw-text-results-from-using-textract">
<h3>2. Raw text results from using Textract<a class="headerlink" href="#raw-text-results-from-using-textract" title="Permalink to this heading">#</a></h3>
<p>When running each cropped image (except the image) on their demo page, I got pretty good results as <code class="docutils literal notranslate"><span class="pre">.txt</span></code> files:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">texts</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">sample_text_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;./kip-text/part</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">rawText.txt&quot;</span>
        <span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">sample_text_path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
        <span class="n">string</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">texts</span><span class="p">[</span><span class="n">sample_text_path</span><span class="p">]</span> <span class="o">=</span> <span class="n">string</span>

    <span class="k">except</span><span class="p">:</span>
        <span class="n">sample_text_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;/home/jovyan/book/kenyans-in-print/kip-text/part</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">rawText.txt&quot;</span>
        <span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">sample_text_path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
        <span class="n">string</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">texts</span><span class="p">[</span><span class="n">sample_text_path</span><span class="p">]</span> <span class="o">=</span> <span class="n">string</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">texts</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">texts</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;---------------------------------------------&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Barbara Nyambura
---------------------------------------------

Barbara Nyambura is an actress, comedian and content creator. She has been in-
volved in a number of local stage productions, and is an extra in the TV series Moni-
ca and a journalist in Kina. On TikTok, she has 105,000 followers, and she emerged
runner up for the TikTok Comedy Creator of the Year in 2020
---------------------------------------------

0 What part of your marketing career does
1
TikTok boost? Do you consider yourself
a professional actress or a professional
marketer?
I got serious about TikTok just a little before
Covid-19 struck as a way to keep my creative side
alive. Starting out, I didn&#39;t have a particular style.
I did anything and everything under the sun. But,
the more I grew as a creator, the more my content
evolved.
It wasn&#39;t until I pulled out my consumer
behaviour notes that I truly understood how
heavily intertwined marketing and acting were.
Creating content has brought to life a lot of the
concepts I learnt in school such as understanding
my audience, mapping out their behaviour
(what they like and don&#39;t like) and using that
information to craft my content in a manner that
would best resonate with them. Hmm I dare say,
I consider myself both a professional marketer
and a professional actress.
.How did you come up with such an
2
interesting persona? Is it that you didn&#39;t
want to be recognised on the streets? Is
---------------------------------------------

your Tiktok persona simply an expression of
your intimate thoughts?
Great question! The different personas I
embody in my videos were all birthed out of
necessity. They are the vehicles that personify
the ideas I have in my head, and I present them
in a visual manner that is understandable
to whoever watches them. So yes, my TikTok
persona is simply an expression of my intimate
thoughts.
You feature on a number of Kenyan
3
series. Is this an area you are interested in
developing? What kind of shows would
you like to be part of in future?
Absolutely. I&#39;m not particularly fixed on any
types of shows. Any opportunity I get to relay a
story, will take in a heartbeat.
.Do your fans try to get you to tell them a
4
joke when they meet you on the streets?
Does that kind of attention feel nice or
invasive?
Haha! Not at all, although that would be an
interesting thing to experience. I highly cherish
---------------------------------------------

any interactions I have with my fans and lovers
of my content. As creators, we always dream of
having our art reach and impact as many people
as possible. So, to have fans show appreciation for
my work, and even detail out what it means to
them, is something I truly treasure.
I view my relationship with fans as a symbiotic
one rather than a predatory one, where both
parties are continuously gaining from each
other. Fans relish in the quality of content while
the celebrity basks in the attention (likes, views,
comments, shares) that comes with it.
Did you ever see yourself on this career
5
path when you were younger? What would
you say to your younger self?
Absolutely not! I mean, I always hoped that
I&#39;d end up in the creative industry but as a
comedian? Haha. That never crossed my mind.
But, I am extremely glad and grateful that I
ended up here and that I get to make thousands
of people laugh. I would tell my younger self to
start. Just start. You don&#39;t need to wait till you
have an expensive camera, phone or lights. The
resources you have, however little, are enough.
---------------------------------------------
</pre></div>
</div>
</div>
</div>
<p>The results are pretty polished, no?</p>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="references">
<h1>References<a class="headerlink" href="#references" title="Permalink to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference external" href="https://projectgurukul.org/python-text-detection-extraction-opencv-ocr/">https://projectgurukul.org/python-text-detection-extraction-opencv-ocr/</a></p></li>
<li><p><a class="reference external" href="https://www.geeksforgeeks.org/text-localization-detection-and-recognition-using-pytesseract/">https://www.geeksforgeeks.org/text-localization-detection-and-recognition-using-pytesseract/</a></p></li>
<li><p><a class="reference external" href="https://stackoverflow.com/questions/8663680/opening-a-txt-file-in-python">https://stackoverflow.com/questions/8663680/opening-a-txt-file-in-python</a></p></li>
</ul>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "ceethinwa/code-walkthroughs",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./kenyans-in-print"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="kip-pg2.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Image block segmentation: Part II</p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Text Recognition</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ocr-technology">OCR Technology</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#installation-on-server-cpu-for-tesseract">Installation on Server/CPU for Tesseract</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#obtain-the-larger-text-for-each-sub-image">Obtain the larger text for each sub-image</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ocr-vs-machine-learning-output">OCR vs. Machine Learning output</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#raw-text-results-from-using-pytesseract">1. Raw text results from using PyTesseract</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#raw-text-results-from-using-textract">2. Raw text results from using Textract</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            <div class="bd-footer-content__inner">
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Cynthia Thinwa
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div></div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>